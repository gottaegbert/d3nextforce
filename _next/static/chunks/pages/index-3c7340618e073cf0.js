(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7628:function(a,b,c){"use strict";c.r(b),c.d(b,{Home:function(){return ay},default:function(){return az}});var d=c(3853),e=c.n(d),f=c(9008),g=c.n(f),h=c(5893);let i=()=>(0,h.jsxs)(g(),{children:[(0,h.jsx)("title",{children:"Next D3 Starter"}),(0,h.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),j=({children:a})=>(0,h.jsxs)("div",{className:e().container,children:[(0,h.jsx)(i,{}),(0,h.jsx)("main",{className:e().main,children:a})]});var k=c(7294);c(648);let l=({frame:a,margins:b,prev:c})=>{let d={...c};return d.frame=a,d.graph.height=a.height-(b.bottom+b.top),d.graph.width=a.width-(b.left+b.right),d.margins=b,d},m=({chartDimensions:a,frame:b,margins:c})=>!Object.is(b,a.frame)||!Object.is(c,a.margins);var n=c(1296),o=c.n(n);let p=a=>{let b=a.current;if(null===b)throw Error("No ref on parent div");return b},q=a=>!Array.isArray(a)||!a.length,r=({array:a,errorMessage:b})=>{if(q(a))throw Error(b??t);return a[s]},s=0,t="Tried to access first entry of empty array",u=(a=v)=>{let b=(0,k.useRef)(null),[c,d]=(0,k.useState)(w),e=a=>{x({resizeObserverEntries:a,setDimensions:d})},f=(0,k.useMemo)(()=>o()(e,a,{leading:!0}),[a]);return(0,k.useEffect)(()=>{let a=p(b),c=new ResizeObserver(f);return c.observe(a),()=>c.unobserve(a)},[f]),{ref:b,dimensions:c}},v=500,w={height:0,width:0},x=({resizeObserverEntries:a,setDimensions:b})=>{let c=z(a);b(a=>Object.is(a,c)?a:c)},y=a=>{let{contentRect:b}=a,c=Math.round(b.height),d=Math.round(b.width);return{height:c,width:d}},z=a=>{let b=r({array:a,errorMessage:"Could not access first entry of resizeObserverEntries."}),c=y(b);return c},A=(a=C)=>{let b=a.margins??B,{ref:c,dimensions:d}=u(),[e,f]=(0,k.useState)({...D,margins:b});return(0,k.useEffect)(()=>{m({chartDimensions:e,frame:d,margins:b})&&f(a=>l({prev:a,frame:d,margins:b}))},[e,d,b]),{ref:c,chartDimensions:e}},B={bottom:10,left:10,right:10,top:10},C={margins:B},D={frame:w,margins:B,graph:w};var E=c(3288),F=c(7549);let G=a=>a.map(([a])=>a);var H=c(9089);let I=a=>{let b=(0,H.Z)(a);return void 0===b[J]?[]:b},J=0,K=(a,b)=>{let c=[...a],{includeZero:d,yRange:e}=b;return e&&(void 0!==e[L]&&(c[L]=e[L]),void 0!==e[M]&&(c[M]=e[M])),d&&(c[L]=0),c},L=0,M=1,N=a=>a.map(([,a])=>a),O=(a,b)=>{let c=I(N(a));return b?K(c,b):c},P=({data:a,graph:b},c)=>{let{height:d,width:e}=b,f=G(a),g=c?.paddingInner??Q,h=c?.paddingOuter??R,i=(0,E.Z)(f,[S,e]).paddingInner(g).paddingOuter(h),j=O(a,c),k=(0,F.Z)(j,[d,S]);return{x:i,y:k}},Q=.2,R=.2,S=0;var T=c(8228),U=c(3838);let V=a=>a??W,W=0,X=a=>a.range()[Y],Y=0,Z=(a,b)=>V(X(b)-b(a[ah])),$=(a,b)=>V(b(a[aj])),_=(a,b)=>V(b(a[ah]));var aa=c(4787),ab=c.n(aa);let ac=({data:a,graph:b,scales:c})=>((0,k.useEffect)(()=>{ad({scales:c,data:a,graph:b})},[a,b,c]),(0,h.jsxs)("g",{id:"barChart",className:ab().container,children:[(0,h.jsx)("g",{id:"axisX"}),(0,h.jsx)("g",{id:"axisY"})]})),ad=({scales:a,data:b,graph:c})=>{let d=a.x.bandwidth(),e=(0,U.Z)("#barChart");e.selectAll("rect").data(b,a=>a[aj]).join(b=>ae(b,c,a.y),b=>af(b,a.y)).attr("x",b=>$(b,a.x)).attr("width",()=>d),al({chart:e,scales:a,graph:c})},ae=(a,b,c)=>a.append("rect").attr("y",b.height).attr("height",ak).transition().duration(ag).attr("y",a=>_(a,c)).attr("height",a=>Z(a,c)),af=(a,b)=>a.transition().duration(ag).attr("y",a=>_(a,b)).attr("height",a=>Z(a,b)).delay((a,b)=>ai*b),ag=500,ah=1,ai=50,aj=0,ak=0,al=({chart:a,scales:b,graph:c})=>{let d=a.select("#axisY");d.call((0,T.y4)(b.y));let e=a.select("#axisX");e.attr("transform",`translate(0,${c.height})`).call((0,T.LL)(b.x))},am=({children:a,margins:b,...c})=>(0,h.jsx)("g",{...c,transform:`translate(${b.left}, ${b.top})`,"data-testid":"groupGraph",children:a});var an=c(4810),ao=c.n(an);let ap=({children:a,className:b,divRef:c,...d})=>(0,h.jsx)("div",{...d,className:`${ao().container} ${b}`,ref:c,"data-testid":"divChartContainer",children:(0,h.jsx)("svg",{...aq,width:"100%",height:"100%",style:{display:"block"},"data-testid":"svgChart",children:a})}),aq={version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",preserveAspectRatio:"none"};var ar=c(6176),as=c.n(ar);let at=[["x",50],["a",10],["b",90],["c",60],["d",110],["e",20],["f",80],["g",100],["h",5],["i",80],["j",10],["k",50]],au={bottom:20,left:25,right:10,top:10},av={includeZero:!0,paddingInner:.5,paddingOuter:.5},aw=()=>{let{ref:a,chartDimensions:b}=A({margins:au}),{graph:c}=b,d=P({data:at,graph:c},av);return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(ap,{divRef:a,className:as().container,children:(0,h.jsx)(am,{margins:au,children:!!c.height&&(0,h.jsx)(ac,{data:at,graph:c,scales:d})})})})},ax=()=>(0,h.jsxs)(j,{children:[(0,h.jsx)("h1",{children:"A Next.js + D3 Starter!"}),(0,h.jsx)("em",{children:"Integrates D3 and React following a D3 first approach:"}),(0,h.jsxs)("ul",{children:[(0,h.jsx)("li",{children:"DOM is mostly handled by D3."}),(0,h.jsx)("li",{children:"Static properties are styled with CSS."}),(0,h.jsx)("li",{children:"Transitions are done by D3"}),(0,h.jsx)("li",{children:"Resizes Charts based on the D3 margins convention."}),(0,h.jsx)("li",{children:"Partially tested with Jest and testing-library."})]}),(0,h.jsx)("div",{children:(0,h.jsx)(aw,{})})]}),ay=()=>(0,h.jsx)(ax,{});var az=ay},8312:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(7628)}])},4787:function(a){a.exports={container:"BarChart_container__OKBNN"}},4810:function(a){a.exports={container:"SVGChartContainer_container__SJKe_"}},6176:function(a){a.exports={container:"TestChart_container__ufiSn"}},3853:function(a){a.exports={container:"Layout_container__S4aNf",main:"Layout_main__c1pHS"}}},function(a){a.O(0,[224,774,888,179],function(){var b;return a(a.s=8312)}),_N_E=a.O()}])